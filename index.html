<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8">
    <title>Ermis TTS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="shortcut icon" type="image/x-icon" href="favicons/favicon.ico">
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <style>
      :root {
        --tab-bg: #0f172a; /* slate-900 */
        --tab-muted: #1e293b; /* slate-800 */
        --tab-accent: #22d3ee; /* cyan-400 */
        --tab-text: #e2e8f0; /* slate-200 */
        --bd: #243041; /* border */
      }
      body { font-family: "Open Sans", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; }

      /* --- Tabs --- */
      .tabs { margin: 24px auto 0; max-width: 1400px; width: calc(100% - 32px); background: #ffffff; border: 1px solid #e5e7eb; border-radius: 14px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,.08); }
      .tab-header { display: flex; flex-wrap: wrap; background: #f1f5f9; }
      .tab-btn { appearance: none; background: transparent; color: #0f172a; padding: 14px 18px; font-weight: 700; border: 0; cursor: pointer; position: relative; }
      .tab-btn[aria-selected="true"] { color: #0f172a; }
      .tab-btn[aria-selected="true"]::after { content: ""; position: absolute; left: 12px; right: 12px; bottom: 0; height: 3px; background: var(--tab-accent); border-radius: 3px 3px 0 0; }
      .tab-panel { display: none; padding: 22px; background: transparent; color: #0f172a; }
      .tab-panel.active { display: block; }

      /* Audio grid */
      .audio-folder { margin: 8px 0 0; border-top: 1px solid #e5e7eb; }
      .audio-folder summary { cursor: pointer; padding: 14px 18px; font-weight: 700; list-style: none; color: #0f172a; }
      .audio-folder summary::-webkit-details-marker { display: none; }
      .audio-folder summary span { opacity: .9; font-weight: 600; font-size: .95rem; color: #334155; }
      .audio-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 12px; padding: 0 18px 18px; }
      .audio-card { background: #ffffff; border: 1px solid #e5e7eb; border-radius: 10px; padding: 10px; }
      .audio-card .fn { display: block; font-size: .85rem; opacity: .85; margin-bottom: 6px; word-break: break-all; }
      .audio-card audio { width: 100%; }

      /* Emoção: layout em 2 colunas (Voz | Emoção) */
      .emotion-controls { display:flex; align-items:center; gap:10px; padding: 0 0 16px 0; }
      .emotion-select { background:#ffffff; color:#0f172a; border:1px solid #e5e7eb; border-radius:8px; padding:8px 10px; }
      .emotion-matrix { display: grid; grid-template-columns: 220px 1fr 1fr; gap: 12px; align-items: start; }
      .emotion-row { display: contents; }
      .col-voice { background:#ffffff; border:1px solid #e5e7eb; border-radius:10px; padding:12px 14px; color:#0f172a; font-weight:700; }
      .col-emotion { background:#ffffff; border:1px solid #e5e7eb; border-radius:10px; padding:10px; }
      .col-head { background:#f8fafc; border:1px solid #e5e7eb; border-radius:10px; padding:10px 14px; font-weight:800; color:#0f172a; }
      .emotion-group { border:1px solid #e5e7eb; border-radius:10px; margin:8px 0; padding:10px; }
      .emotion-group h4 { margin:0 0 8px 0; color:#0f172a; }
      .emotion-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); gap:10px; }
      .placeholder { opacity:.5; text-align:center; padding:12px; }
      .emotion-row { display: contents; }
      .col-voice { background:#ffffff; border:1px solid #e5e7eb; border-radius:10px; padding:12px 14px; color:#0f172a; font-weight:700; }
      .col-emotion { background:#ffffff; border:1px solid #e5e7eb; border-radius:10px; padding:10px; }
      .emotion-group { border:1px solid #e5e7eb; border-radius:10px; margin:8px 0; padding:10px; }
      .emotion-group h4 { margin:0 0 8px 0; color:#0f172a; }
      .emotion-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(220px,1fr)); gap:10px; }

      /* Header small fixes so it still looks ok */
      #page-header { position: relative; min-height: 220px; color: white; overflow: hidden; }
      #bg-header { position: absolute; inset: 0; background: radial-gradient(1200px 600px at 20% -10%, rgba(34,211,238,.25), transparent), radial-gradient(1000px 600px at 80% 0%, rgba(99,102,241,.25), transparent), linear-gradient(180deg, #0b1022 0%, #04070f 100%); }
      #demo-canvas { position: absolute; inset: 0; }
      .main-title { position: relative; z-index: 2; display: grid; place-items: center; padding: 56px 16px; text-align: center; }
      .project-name a { color: white; text-decoration: none; }
      .project-tagline { color: #c7d2fe; font-weight: 600; }
    </style>
  </head>
  <body>
    <section id="page-header" class="page-header">
      <div id="bg-header"></div>
      <canvas id="demo-canvas"></canvas>
      <div class="main-title">
        <h1 class="project-name"><span><a href="index.html">Ermis TTS</a></span></h1>
        <h2 class="project-tagline">Síntese neural multilíngue com clonagem de voz e controle de emoção</h2>
      </div>
    </section>

    <section class="main-content">
      <!-- Links removidos/ocultos enquanto ajustamos para Ermis -->

      <br><br>
      <div style="text-align: center;">
        <h2>Ermis TTS: The best TTS for everyone</h2>
        <p><b>Edresson Casanova, Julian Weber, Christopher Shulby, Arnaldo Candido Junior, Eren Gölge e Moacir Antonelli Ponti</b></p>
      </div>

      <h3>Descrição</h3>
      <p>
        <b>Ermis TTS</b> é um mecanismo de síntese de voz neural projetado para produção: suporta múltiplas vozes e idiomas, clonagem de voz (zero‑shot) a partir de poucos segundos de áudio e <i>style transfer</i> para emoções como <em>Impact</em>, <em>Sad</em> e variações de prosódia.
        A pilha foi otimizada para baixa latência, alto paralelismo e fácil implantação em servidores ou notebooks, mantendo qualidade natural e alta similaridade com a voz alvo. As amostras abaixo ilustram organização por voz, por emoção e por modelo.
      </p>


      <h2>Amostras Ermis-TTS</h2>

      <p>
        Abaixo estão demos geradas pelo pipeline da <b>Ermis</b>, organizadas em três abas: <b>Por voz</b> (pastas/vozes), <b>Por emoção</b> (matriz Voz × Emoção) e <b>Por modelo</b> (estrutura técnica). Os nomes de arquivos seguem o padrão <code>pt_impact_#.wav</code>, <code>pt_sad_#.wav</code> e <code>pt_mid_long_#.wav</code> para facilitar comparação.
      </p>

      <div class="tabs" role="tablist" aria-label="Amostras organizadas">
        <div class="tab-header">
          <button class="tab-btn" role="tab" aria-selected="true" aria-controls="painel-voz" id="tab-voz">Por voz</button>
          <button class="tab-btn" role="tab" aria-selected="false" aria-controls="painel-emocao" id="tab-emocao">Por emoção</button>
          <button class="tab-btn" role="tab" aria-selected="false" aria-controls="painel-modelo" id="tab-modelo">Por modelo</button>
        </div>
        <div class="tab-panel active" id="painel-voz" role="tabpanel" aria-labelledby="tab-voz">
          <p>Prévia por voz, separados por pasta. Expanda uma pasta para ver os áudios.</p>

          <details class="audio-folder" open>
            <summary>female-alc-dub <span>— Impact & Sad</span></summary>
            <div class="audio-grid" data-base="audios_demo/Ermis/audios_gerados_spark_tts/output-enhanced-48khz/female-alc-dub/output" data-groups='[{"label":"Impact","prefix":"pt_impact_","start":0,"end":14},{"label":"Sad","prefix":"pt_sad_","start":0,"end":14}]'></div>
          </details>

          <details class="audio-folder">
            <summary>female-alc-dub-2 <span>— Impact & Sad</span></summary>
            <div class="audio-grid" data-base="audios_demo/Ermis/audios_gerados_spark_tts/output-enhanced-48khz/female-alc-dub-2/output" data-groups='[{"label":"Impact","prefix":"pt_impact_","start":0,"end":14},{"label":"Sad","prefix":"pt_sad_","start":0,"end":14}]'></div>
          </details>

          <details class="audio-folder">
            <summary>male-alc-dub <span>— Mid-Long</span></summary>
            <div class="audio-grid" data-base="audios_demo/Ermis/audios_gerados_spark_tts/output-enhanced-48khz/male-alc-dub/output" data-groups='[{"label":"Mid-Long","prefix":"pt_mid_long_","start":0,"end":19}]'></div>
          </details>

          <details class="audio-folder">
            <summary>male-alc-dub-2 <span>— Mid-Long</span></summary>
            <div class="audio-grid" data-base="audios_demo/Ermis/audios_gerados_spark_tts/output-enhanced-48khz/male-alc-dub-2/output" data-groups='[{"label":"Mid-Long","prefix":"pt_mid_long_","start":0,"end":24}]'></div>
          </details>

          <details class="audio-folder">
            <summary>male-alc-dub-2_2 <span>— Impact</span></summary>
            <div class="audio-grid" data-base="audios_demo/Ermis/audios_gerados_spark_tts/output-enhanced-48khz/male-alc-dub-2_2/output" data-groups='[{"label":"Impact","prefix":"pt_impact_","start":0,"end":14}]'></div>
          </details>

          <details class="audio-folder">
            <summary>male-alc-dub-2_3 <span>— Sad</span></summary>
            <div class="audio-grid" data-base="audios_demo/Ermis/audios_gerados_spark_tts/output-enhanced-48khz/male-alc-dub-2_3/output" data-groups='[{"label":"Sad","prefix":"pt_sad_","start":0,"end":14}]'></div>
          </details>
        </div>
        <div class="tab-panel" id="painel-emocao" role="tabpanel" aria-labelledby="tab-emocao">
          <div class="emotion-controls">
            <label for="sel-pasta">Escolher pasta:</label>
            <select id="sel-pasta" class="emotion-select">
              <option value="ALL">Todas</option>
              <option value="female-alc-dub">female-alc-dub</option>
              <option value="female-alc-dub-2">female-alc-dub-2</option>
              <option value="male-alc-dub">male-alc-dub</option>
              <option value="male-alc-dub-2">male-alc-dub-2</option>
              <option value="male-alc-dub-2_2">male-alc-dub-2_2</option>
              <option value="male-alc-dub-2_3">male-alc-dub-2_3</option>
            </select>
          </div>
          <div id="emotion-matrix" class="emotion-matrix" aria-live="polite"></div>
        </div>
        <div class="tab-panel" id="painel-modelo" role="tabpanel" aria-labelledby="tab-modelo">
          <p>Conteúdo "Por modelo": liste as pastas/modelos disponíveis (ex.: <code>female-alc-dub</code>, <code>male-alc-dub-2</code>) e o que diferencia cada um.</p>
        </div>
      </div>

      <footer class="site-footer">
        <a href="https://coqui.ai/" title="Coqui AI" target="_blank"><img src="img/coqui.png" border="0" height="40" alt="Coqui AI"></a>
        <a href="http://www.defined.ai/" title="Defined.ai" target="_blank"><img src="img/df.jpeg" border="0" height="50" alt="Defined.ai"></a>
        <a href="http://www.deeplearningbrasil.com.br/" title="Deep Learning Brasil" target="_blank"><img src="img/dlb.png" border="0" height="50" alt="Deep Learning Brasil"></a>
        <a href="http://icmc.usp.br/" title="Institute of Mathematics and Computer Science (ICMC)" target="_blank"><img src="img/icmc.png" border="0" height="55" alt="ICMC"></a>
        <a href="https://www.soprabanking.com/" title="Sopra Banking Software" target="_blank"><img src="img/sbs.png" border="0" height="38" alt="Sopra Banking Software"></a>
        <div class="cleaner"></div>
      </footer>
    </section>

    <script>
      // Tabs simples
      const tabButtons = document.querySelectorAll('.tab-btn');
      const tabPanels = document.querySelectorAll('.tab-panel');
      tabButtons.forEach((btn) => {
        btn.addEventListener('click', () => {
          tabButtons.forEach((b) => b.setAttribute('aria-selected', 'false'));
          btn.setAttribute('aria-selected', 'true');
          tabPanels.forEach((p) => p.classList.remove('active'));
          document.getElementById(btn.getAttribute('aria-controls')).classList.add('active');
        });
      });
    </script>

    <script>
      // Constrói os cartões de áudio a partir dos atributos data-* em cada .audio-grid
      function buildAudioGrids() {
        const grids = document.querySelectorAll('.audio-grid');
        grids.forEach(grid => {
          const base = grid.getAttribute('data-base');
          /** @type {{label:string,prefix:string,start:number,end:number}[]} */
          const groups = JSON.parse(grid.getAttribute('data-groups') || '[]');
          groups.forEach(group => {
            for (let i = group.start; i <= group.end; i++) {
              const filename = `${group.prefix}${i}.wav`;
              const card = document.createElement('div');
              card.className = 'audio-card';
              const label = document.createElement('span');
              label.className = 'fn';
              label.textContent = (group.label ? String(group.label).toLowerCase() : 'audio');
              const audio = document.createElement('audio');
              audio.controls = true;
              audio.src = `${base}/${filename}`;
              audio.preload = 'none';
              card.appendChild(label);
              card.appendChild(audio);
              grid.appendChild(card);
            }
          });
        });
      }
      // Inicializa quando a aba "Por voz" estiver ativa pela primeira vez
      const painelVoz = document.getElementById('painel-voz');
      let audiosBuilt = false;
      const ensureBuild = () => { if (!audiosBuilt) { buildAudioGrids(); audiosBuilt = true; } };
      // Se já estiver ativa no load, constrói
      if (painelVoz.classList.contains('active')) ensureBuild();
      // Reconstrói ao clicar na aba "Por voz"
      document.getElementById('tab-voz').addEventListener('click', ensureBuild);
    </script>

    <script>
      // --- POR EMOÇÃO ---
      const EMOTION_CONFIG = {
        baseRoot: 'audios_demo/Ermis/audios_gerados_spark_tts/output-enhanced-48khz',
        folders: {
          'female-alc-dub': [
            { label: 'Impact', prefix: 'pt_impact_', start: 0, end: 14 },
            { label: 'Sad',    prefix: 'pt_sad_',    start: 0, end: 14 }
          ],
          'female-alc-dub-2': [
            { label: 'Impact', prefix: 'pt_impact_', start: 0, end: 14 },
            { label: 'Sad',    prefix: 'pt_sad_',    start: 0, end: 14 }
          ],
          'male-alc-dub': [
            { label: 'Mid-Long', prefix: 'pt_mid_long_', start: 0, end: 19 }
          ],
          'male-alc-dub-2': [
            { label: 'Mid-Long', prefix: 'pt_mid_long_', start: 0, end: 24 }
          ],
          'male-alc-dub-2_2': [
            { label: 'Impact', prefix: 'pt_impact_', start: 0, end: 14 }
          ],
          'male-alc-dub-2_3': [
            { label: 'Sad', prefix: 'pt_sad_', start: 0, end: 14 }
          ]
        }
      };

      function buildEmotionMatrix(selection = 'ALL') {
        const container = document.getElementById('emotion-matrix');
        container.innerHTML = '';

        // Cabeçalho: Voz | Emoção 1 | Emoção 2
        const headVoice = document.createElement('div');
        headVoice.className = 'col-voice col-head';
        headVoice.textContent = 'Voz';
        const headE1 = document.createElement('div');
        headE1.className = 'col-emotion col-head';
        headE1.textContent = 'Emoção 1';
        const headE2 = document.createElement('div');
        headE2.className = 'col-emotion col-head';
        headE2.textContent = 'Emoção 2';
        container.appendChild(headVoice);
        container.appendChild(headE1);
        container.appendChild(headE2);

        const folders = Object.keys(EMOTION_CONFIG.folders);
        const chosen = selection === 'ALL' ? folders : [selection];

        chosen.forEach(folder => {
          const groups = EMOTION_CONFIG.folders[folder] || [];

          // Coluna 1: Voz
          const voiceCell = document.createElement('div');
          voiceCell.className = 'col-voice';
          voiceCell.textContent = folder;

          // Colunas 2 e 3: Emoções (até 2 por linha)
          const em1 = document.createElement('div');
          em1.className = 'col-emotion';
          const em2 = document.createElement('div');
          em2.className = 'col-emotion';

          const fillEmotion = (cell, group) => {
            if (!group) { cell.innerHTML = '<div class="placeholder">—</div>'; return; }
            const wrap = document.createElement('div');
            wrap.className = 'emotion-group';
            const h = document.createElement('h4');
            h.textContent = group.label;
            const grid = document.createElement('div');
            grid.className = 'emotion-grid';
            for (let i = group.start; i <= group.end; i++) {
              const filename = `${group.prefix}${i}.wav`;
              const card = document.createElement('div');
              card.className = 'audio-card';
              const label = document.createElement('span');
              label.className = 'fn';
              label.textContent = (group.label ? String(group.label).toLowerCase() : 'audio');
              const audio = document.createElement('audio');
              audio.controls = true;
              audio.preload = 'none';
              audio.src = `${EMOTION_CONFIG.baseRoot}/${folder}/output/${filename}`;
              card.appendChild(label);
              card.appendChild(audio);
              grid.appendChild(card);
            }
            wrap.appendChild(h);
            wrap.appendChild(grid);
            cell.appendChild(wrap);
          };

          fillEmotion(em1, groups[0]);
          fillEmotion(em2, groups[1]);

          container.appendChild(voiceCell);
          container.appendChild(em1);
          container.appendChild(em2);
        });
      }

      // Inicialização da aba "Por emoção"
      const selPasta = document.getElementById('sel-pasta');
      const painelEmocao = document.getElementById('painel-emocao');
      let emotionBuilt = false;
      function ensureEmotionBuild() {
        if (!emotionBuilt) {
          buildEmotionMatrix(selPasta.value);
          emotionBuilt = true;
        }
      }
      // Se usuário abre a aba emoção
      document.getElementById('tab-emocao').addEventListener('click', ensureEmotionBuild);
      // Se a página abrir já nessa aba por algum motivo
      if (painelEmocao.classList.contains('active')) ensureEmotionBuild();
      // Mudança da seleção
      selPasta.addEventListener('change', () => buildEmotionMatrix(selPasta.value));
    </script>

    <script src="js/animheader.js"></script>
  </body>
</html>
